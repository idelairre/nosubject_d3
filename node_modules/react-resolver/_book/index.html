<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Home | React Resolver https://img.shields.io/npm/v/react-resolver.svg   </title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Async-rendering &amp; data-fetching for universal React applications.">
        <meta name="generator" content="GitBook 2.2.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
    

        
    
    
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="0" data-basepath="." data-revision="Wed Aug 19 2015 21:42:01 GMT-0500 (CDT)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter active" data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Home
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" >
            
            <span><b>1.</b> Introduction</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="docs/introduction/Motivation.html">
            
            <span><b>1.1.</b> Motivation</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="docs/inroduction/UniversalArchitecture.html">
            
            <span><b>1.2.</b> Universal Architecture</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="docs/introduction/Examples.html">
            
            <span><b>1.3.</b> Examples</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Getting Started</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="docs/getting-started/Installation.html">
            
            <span><b>2.1.</b> Installation</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="docs/getting-started/DecoratingComponents.html">
            
            <span><b>2.2.</b> Decorating Components</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="docs/getting-started/ClientRendering.html">
            
            <span><b>2.3.</b> Client Rendering</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="docs/getting-started/ServerRendering.html">
            
            <span><b>2.4.</b> Server Rendering</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="docs/getting-started/Bootstrapping.html">
            
            <span><b>2.5.</b> Bootstrapping</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="docs/Troubleshooting.html">
            
            <span><b>3.</b> Troubleshooting</span>
            
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >React Resolver https://img.shields.io/npm/v/react-resolver.svg   </a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="react-resolver-https-img-shields-io-npm-v-react-resolver-svg-https-img-shields-io-npm-v-react-resolver-svg-style-flat-square-https-img-shields-io-github-issues-raw-ericclemmons-react-resolver-svg-style-flat-square-https-github-com-ericclemmons-react-resolver-issues-https-img-shields-io-travis-ericclemmons-react-resolver-master-svg-style-flat-square-https-travis-ci-org-ericclemmons-react-resolver-https-img-shields-io-david-ericclemmons-react-resolver-svg-style-flat-square-https-david-dm-org-ericclemmons-react-resolver-info-dependencies">React Resolver <img src="https://img.shields.io/npm/v/react-resolver.svg?style=flat-square" alt="https://img.shields.io/npm/v/react-resolver.svg"> <a href="https://github.com/ericclemmons/react-resolver/issues" target="_blank"><img src="https://img.shields.io/github/issues-raw/ericclemmons/react-resolver.svg?style=flat-square" alt=""></a> <a href="https://travis-ci.org/ericclemmons/react-resolver" target="_blank"><img src="https://img.shields.io/travis/ericclemmons/react-resolver/master.svg?style=flat-square" alt=""></a> <a href="https://david-dm.org/ericclemmons/react-resolver#info=dependencies" target="_blank"><img src="https://img.shields.io/david/ericclemmons/react-resolver.svg?style=flat-square" alt=""></a></h1>
<blockquote>
<p>Async-rendering &amp; data-fetching for universal React applications.</p>
</blockquote>
<p>React Resolver lets you <strong>define data requirements <em>per-component</em></strong>
and will <strong>handle the nested, async rendering on both the server &amp; client for you.</strong></p>
<p><a href="http://www.reactiflux.com" target="_blank"><img src="https://img.shields.io/badge/slack-@react--resolver-61DAFB.svg?style=flat-square" alt=""></a>
<a href="https://gitter.im/ericclemmons/react-resolver?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" target="_blank"><img src="https://img.shields.io/badge/GITTER-join%20chat-green.svg?style=flat-square" alt=""></a></p>
<hr>
<h2 id="why">Why?</h2>
<p><a href="http://facebook.github.io/react/" target="_blank">React</a>&apos;s rendering is synchronous by design.
As a result, rendering on the server is left as an exercise for the rest of the
community to figure out.</p>
<p>There are some cludgy solutions for this, most of which require having
<strong>fat <del>handlers</del> <del>components</del> controllers</strong> at the top of your application
that are responsible for <strong>marshalling data for all components under them</strong>.</p>
<p>For a non-trivial application, this means mixing concerns between your
specialized components and the <em>controllers</em>, which is conceptually difficult
and programmatically annoying to maintain.</p>
<h2 id="how">How?</h2>
<p>The simplest example is a pure, client-side only application.  Afterwards,
we can change a few lines to turn this into a universal application.</p>
<p>If you&apos;re the visual type, <strong>view the examples</strong>:</p>
<ul>
<li><a href="https://github.com/ericclemmons/react-resolver/tree/v2/examples/react-v0.13" target="_blank">React v0.13 + React Router v0.13 Example</a></li>
<li><a href="https://github.com/ericclemmons/react-resolver/tree/v2/examples/react-v0.14" target="_blank">React v0.14 + React Router 1.0 Example</a></li>
</ul>
<h3 id="dependencies">Dependencies</h3>
<ul>
<li>React <code>v0.13</code> or <code>v0.14</code></li>
</ul>
<p><em>For browsers that don&apos;t natively support Promises, use <a href="https://github.com/jakearchibald/es6-promise" target="_blank">ES6 Promises</a>.</em></p>
<h3 id="1-install-react-resolver">1. Install <code>react-resolver</code></h3>
<pre><code class="lang-shell">$ npm install --save react-resolver
</code></pre>
<h3 id="2-decorate-components-with-data">2. Decorate Components with Data</h3>
<p>Suppose you have the following <code>Stargazer</code> component to render a Github user&apos;s
profile:</p>
<pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stargazer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  static propTypes = {
    user: React.PropTypes.object.isRequired,
  }

  render() {
    <span class="hljs-comment">/* Render profile from this.props.user */</span>
  }
}
</code></pre>
<p>In 2014, you would use <code>componentWillMount</code> to fire off an AJAX request for
the profile, then use <code>setState</code> to trigger a re-render with the data.</p>
<p><strong>This won&apos;t work on the server-side</strong>, and it&apos;s annoying to test.</p>
<p>According to most universal boilerplates, we&apos;d put <code>static fetchData()</code> function
in our component for a middleware or library to handle, rendering the component
when data comes back.</p>
<p><strong>This only works for <em>fat controllers</em> at the top of your application</strong>,
usually defined by a <a href="https://github.com/rackt/react-router/" target="_blank">React Router</a> <code>&lt;Route&gt;</code>.</p>
<p>Instead, let&apos;s decorate it:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-resolver&quot;</span>;

<span class="hljs-comment">// Assuming this _is_ from &lt;Route&gt; component matching `/users/ericclemmons`</span>
@resolve(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">props</span>) </span>{
  <span class="hljs-keyword">return</span> axios
    .get(<span class="hljs-string">`https://api.github.com/users/<span class="hljs-subst">${props.params.user}</span>`</span>)
    .then((response) =&gt; response.data)
  ;
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stargazer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
</code></pre>
<p>Or, if <a href="https://github.com/wycats/javascript-decorators" target="_blank">ES7 decorators</a> aren&apos;t your bag:</p>
<pre><code class="lang-js"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Stargazer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  ...
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> resolve(Stargazer)(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">props</span>) </span>{ ... });
</code></pre>
<h3 id="3-render-on-the-client">3. Render on the Client</h3>
<p>Again, if we&apos;re only rendering on the client, we can render like normal:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> React <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react&quot;</span>;

Router.run(routes, location, (Root) =&gt; {
  React.render(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Root</span> /&gt;</span>, document.getElementById(&quot;app&quot;));
});
</span></code></pre>
<p><strong>The End</strong>.  <em>(Unless you want to see how to build a universal application)</em></p>
<h3 id="4-resolve-on-the-client">4. Resolve on the Client</h3>
<p>React Resolver <strong>handles bootstrapping server-rendered markup</strong> via
<code>Resolver.render</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { Resolver } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-resolver&quot;</span>;

Router.run(routes, location, (Root) =&gt; {
  <span class="hljs-comment">// To preserver context, you have to pass a render function!</span>
  Resolver.render(() =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Root</span> /&gt;</span>, document.getElementById(&quot;app&quot;));
});
</span></code></pre>
<h3 id="5-resolve-on-the-server">5. Resolve on the Server</h3>
<p>The server will look very familiar to the client-side version.  The difference
being, <code>Resolver.resolve</code> will async render the application, fetch all data, &amp;
return a <code>&lt;Resolved /&gt;</code> component ready for <code>React.render</code>, as well as the
<code>data</code> needed to bootstrap the client:</p>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { Resolver } <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;react-resolver&quot;</span>;

Router.create({ location, routes }).run((Handler, state) =&gt; {
  Resolver
    .resolve(() =&gt; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Handler</span> {<span class="hljs-attribute">...state</span>} /&gt;</span>)</span> <span class="hljs-comment">// Pass a render function for context!</span>
    .then(({ Resolved, data }) =&gt; {
      res.send(<span class="hljs-string">`
        &lt;!DOCTYPE html&gt;
        &lt;html&gt;
          &lt;body&gt;
            &lt;div id=&quot;app&quot;&gt;<span class="hljs-subst">${React.render(&lt;Resolved /&gt;)}</span>&lt;/div&gt;

            &lt;script src=&quot;/client.min.js&quot; async defer&gt;&lt;/script&gt;
            &lt;script&gt;
              window.__REACT_RESOLVER_PAYLOAD__ = <span class="hljs-subst">${JSON.stringify(data)}</span>
            &lt;/script&gt;
          &lt;/body&gt;
        &lt;/html&gt;
      `</span>)
    })
    .catch((error) =&gt; res.status(<span class="hljs-number">500</span>).send(error)) <span class="hljs-comment">// Just in case!</span>
  ;
});
</code></pre>
<p><strong>Enjoy writing universal apps with clarity around data requirements!</strong></p>
<h2 id="development">Development</h2>
<p>If you&apos;d like to contribute to this project, all you need to do is clone
this project and run:</p>
<pre><code class="lang-shell">$ npm install
$ npm test
</code></pre>
<h2 id="authors">Authors</h2>
<ul>
<li><a href="mailto:eric@smarterspam.com" target="_blank">Eric Clemmons</a> (<a href="https://twitter.com/ericclemmons/" target="_blank">@ericclemmons</a>)</li>
</ul>
<h2 id="-license-license"><a href="https://github.com/ericclemmons/react-resolver/blob/master/LICENSE" target="_blank">License</a></h2>
<h2 id="collaboration">Collaboration</h2>
<p>If you have questions or issues, please <a href="https://github.com/ericclemmons/react-resolver/issues/new" target="_blank">open an issue</a>!</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
